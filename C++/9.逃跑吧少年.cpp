#include<bits/stdc++.h>
#include <iostream>
#include <cstdio>
#include <conio.h>
#include <windows.h>
#define ll long long
#define fd(a,b,c) for(int a=b;a<=c;a++)
#define ms(a,b) memset(a,b,sizeof(a))
#define put(a) scanf("%lld",&a)
#define out(a) printf("%lld",a)
#define pline printf("\n")
#define fre freopen
using namespace std;
ll money_=100,xl1=100,xl2=200,money=100;
ll x=7,y=1,x2=7,y2=54;
bool f[100][100],fl=0;
char c;
string a[40]={
	"______________________________________________________________", 
	"|    N ########     /       /  ########          |",
	"|                       /    =  /    N        =      |",
	"|        //#      #     =                  #      #          |",
	"|        //########                        ###  ###          |",
	"|#####                   #####II#####  =                ##-##|",
	"|    #     =          =  #          #       =           #    |",
	"|o           //          I          I             @ #   +|",
	"|    #       //   =      #          #// =           #    |",
	"|#####      =        #####II#####//                 ##-##|",
	"|                                                        |",
	"|          ###  ###    =                   ########          |",
	"|          #      #                        #      #      |",
	"|  /      N            //      =                     |",
	"|  /   ########     /    =   ///   ######## N    =   |",
	"|____________________________________________________________|",
};
string b[40]={
	"______________________________________________________________", 
	"|          ########                        ########          |",
	"|                                                            |",
	"|          #      #                        #      #          |",
	"|          ########                        ###  ###          |",
	"|#####                __________________                ## ##|",
	"|    #               |__________________|               #    |",
	"|                    |                  |               #   o|",
	"|    #               |     TSZ WIN      |               #    |",
	"|#####               |__________________|               ## ##|",
	"|                                                            |",
	"|          ###  ###                        ########          |",
	"|          #      #                        #      #          |",
	"|                                                            |",
	"|          ########                        ########          |",
	"|____________________________________________________________|",
};
string cc[40]={
	"______________________________________________________________", 
	"|          ########                        ########          |",
	"|                                                            |",
	"|          #      #                        #      #          |",
	"|          ########                        ###  ###          |",
	"|#####                __________________                ## ##|",
	"|    #               |__________________|               #    |",
	"|                    |                  |               #   +|",
	"|    #               |     ZBZ WIN      |               #    |",
	"|#####               |__________________|               ## ##|",
	"|                                                            |",
	"|          ###  ###                        ########          |",
	"|          #      #                        #      #          |",
	"|                                                            |",
	"|          ########                        ########          |",
	"|____________________________________________________________|",
};
char ch;
void fz()
{
	if(ch=='4'&&money_>=88)
	{
		ll cnt=0;
		money_-=88;
		a[x][y]=' ';
		while(a[x-1][y]!='#'&&a[x-1][y]!='='&&a[x-1][y]!='-'&&a[x-1][y]!='_'&&a[x-1][y]!='|'&&cnt<=8&&a[x-1][y]!='N'&&a[x-1][y]!='@'&&a[x-1][y]!='I')
		{
			x--;
			cnt++;
			a[x][y]=' ';
		}
		a[x][y]='o';
	}
	if(ch=='6'&&money_>=88)
	{
		ll cnt=0;
		money_-=88;
		a[x][y]=' ';
		while(a[x][y-1]!='#'&&a[x][y-1]!='='&&a[x][y-1]!='-'&&a[x][y-1]!='_'&&a[x][y-1]!='|'&&cnt<=8&&a[x][y-1]!='N'&&a[x][y-1]!='@'&&a[x][y-1]!='I')
		{
			y--;
			cnt++;
			a[x][y]=' ';
		}
		a[x][y]='o';
	}
	if(ch=='5'&&money_>=88)
	{
		ll cnt=0;
		money_-=88;
		a[x][y]=' ';
		while(a[x+1][y]!='#'&&a[x+1][y]!='='&&a[x+1][y]!='-'&&a[x+1][y]!='_'&&a[x+1][y]!='|'&&cnt<=8&&a[x+1][y]!='N'&&a[x+1][y]!='@'&&a[x+1][y]!='I')
		{
			x++;
			cnt++;
			a[x][y]=' ';
		}
		a[x][y]='o';
	}
	if(ch=='7'&&money_>=88)
	{
		ll cnt=0;
		money_-=88;
		a[x][y]=' ';
		while(a[x][y+1]!='#'&&a[x][y+1]!='='&&a[x][y+1]!='-'&&a[x][y+1]!='_'&&a[x][y+1]!='|'&&cnt<=8&&a[x][y+1]!='N'&&a[x][y+1]!='@'&&a[x][y+1]!='I')
		{
			y++;
			cnt++;
			a[x][y]=' ';
		}
		a[x][y]='o';
	}
}
void jn()
{
	if(ch=='1'&&money_>=100) xl1=100,money_-=100;
	if(ch=='2'&&money_>=150)
	{
		fd(i,-2,2)
		fd(j,-2,2)
		{
			if(x+i==x2&&y+j==y2) xl2-=50;
		}
		money_-=150;
	}
	if(ch=='3'&&money_>=25)
	{
		fd(i,-1,1)
		fd(j,-1,1)
		{
			if(x+i==x2&&y+j==y2) xl2-=25;
		}
		ll xx[]={2,-2,0,0},yy[]={0,0,2,-2};
		fd(i,0,3)
		{
			if(x+xx[i]==x2&&y+yy[i]==y2) xl2-=20;
		}
		money_-=30;
	}
}
void add()
{
//	if(f[x][y]) a[x][y]='/';
	if(ch=='a')
	{
		if(a[x][y-1]!='#'&&a[x][y-1]!='―'&&a[x][y-1]!='_'&&a[x][y-1]!='|'&&a[x][y-1]!='@')
		{
			if(a[x][y-1]=='=') money_+=65;
			if(a[x][y-1]=='N')
			{
				money_+=205;
				Sleep(2000);
			}
			if(a[x][y-1]=='I'||a[x][y-1]=='-')
			{
				Sleep(2000);
			}
			a[x][y]=' ';
			y--;
			a[x][y]='o';
		}
	}
	if(ch=='s')
	{
		if(a[x+1][y]!='#'&&a[x+1][y]!='―'&&a[x+1][y]!='_'&&a[x+1][y]!='|'&&a[x+1][y]!='@')
		{
			if(a[x+1][y]=='=') money_+=65;
			if(a[x+1][y]=='N')
			{
				money_+=205;
				Sleep(2000);
			}
			if(a[x+1][y]=='I'||a[x+1][y]=='-')
			{
				Sleep(2000);
			}
			a[x][y]=' ';
			x++;
			a[x][y]='o';
		}
	}
	if(ch=='d')
	{
		if(a[x][y+1]!='#'&&a[x][y+1]!='―'&&a[x][y+1]!='_'&&a[x][y+1]!='|'&&a[x][y+1]!='@')
		{
			if(a[x][y+1]=='=') money_+=65;
			if(a[x][y+1]=='N')
			{
				money_+=205;
				Sleep(2000);
			}
			if(a[x][y+1]=='I'||a[x][y+1]=='-')
			{
				Sleep(2000);
			}
			a[x][y]=' ';
			y++;
			a[x][y]='o';
		}
	}
	if(ch=='w')
	{
		if(a[x-1][y]!='#'&&a[x-1][y]!='―'&&a[x-1][y]!='_'&&a[x-1][y]!='|'&&a[x-1][y]!='@')
		{
			if(a[x-1][y]=='=') money_+=65;
			if(a[x-1][y]=='N')
			{
				money_+=205;
				Sleep(2000);
			}
			if(a[x-1][y]=='I'||a[x-1][y]=='-')
			{
				Sleep(2000);
			}
			a[x][y]=' ';
			x--;
			a[x][y]='o';
		}
	}
//	if(f[x][y]) a[x][y]='/';
}
ll dx[4]={0,1,0,-1},dy[4]={-1,0,1,0};
void zbz()
{
//	if(f[x2][y2]) a[x2][y2]='/';
	if(ch=='j')
	{
		if(a[x2][y2-1]==' '||a[x2][y2-1]=='I'||a[x2][y2-1]=='/')
		{
			a[x2][y2]=' ';
			y2--;
			a[x2][y2]='@';
		}
	}
	if(ch=='k')
	{
		if(a[x2+1][y2]==' '||a[x2+1][y2]=='I'||a[x2+1][y2]=='/')
		{
			a[x2][y2]=' ';
			x2++;
			a[x2][y2]='@';
		}
	}
	if(ch=='l')
	{
		if(a[x2][y2+1]==' '||a[x2][y2+1]=='I'||a[x2][y2+1]=='/')
		{
			a[x2][y2]=' ';
			y2++;
			a[x2][y2]='@';
		}
	}
	if(ch=='i')
	{
		if(a[x2-1][y2]==' '||a[x2-1][y2]=='I'||a[x2-1][y2]=='/')
		{
			a[x2][y2]=' ';
			x2--;
			a[x2][y2]='@';
		}
	}
	fd(i,-1,1)
	fd(j,-1,1)
	{
		if(a[x2+i][y2+j]=='o') xl1-=20,money+=25;
	}
	ll l=100,lll=200;
	if(ch=='8'&&money>=120) xl2=min(xl2+l,lll);
	if(ch=='9'&&money>=150)
	{
		fd(i,-2,2)
		fd(j,-2,2)
		{
			if(x+i==x2&&y+j==y2) xl1-=50;
		}
		money-=150;
	}
	fd(i,-3,3)
	fd(j,-4,4)
	{
		if(x2+i==x&&y2+j==y) fl=1,a[x2][y2]='@';
	}
//	if(f[x2][y2]) a[x2][y2]='/';
}
void c_out()
{ 
	system("cls");
	cout<<"逃生者:肾上激素 $100 1    手雷 $150 2    射击 $30 3    传送门 $88 4/5/6/7"<<endl;
	cout<<"追捕者:医疗包 $120 8    手雷 $150 9"<<endl;
	cout<<"逃生者金币 "<<money_<<endl;
	cout<<"追捕者金币 "<<money<<endl;
	cout<<"逃生者血量 ";
	fd(i,1,xl1/5) cout<<"*";
	pline;
	cout<<"追捕者血量 ";
	fd(i,1,xl2/5) cout<<"*";
	pline;
	if(fl) cout<<"危险";
	else cout<<"安全"; 
	pline;
	pline;
}
int main()
{
//	cout<<a[8][1]<<' '<<a[8][54];
	c_out();
	fd(i,0,16)
	{
		cout<<a[i]<<endl;
	}
	fd(i,0,16)
	{
		fd(j,0,61)
		if(a[i][j]=='/') f[i][j]=1;
	}
	a[x2][y2]=' ';
	while(1)
	{
		a[x2][y2]=' ';
		fd(i,0,16)
		fd(j,0,61)
		if(f[i][j]) a[i][j]='/';
		if(xl1<=0)
		{
			c_out();
			fd(i,0,16)
			{
				cout<<cc[i]<<endl;
			}
			Sleep(5000); 
			return 0;
		}
		ch=_getch();
		add();
		fz();
		jn();
		if(xl2<=0)
		{
			a[x2][y2]=' ';
		}
		else
		{
			zbz();
			ll l=200,lll=5;
			xl2=min(xl2+lll,l);
		}
		if(a[7][60]=='o')
		{
			c_out();
			fd(i,0,16)
			{
				cout<<b[i]<<endl;
			}
			Sleep(5000);
			return 0;
		}
		if(a[5][58]=='o'||a[9][58]=='o')
		{
			money_+=200;
		}
		fd(i,0,16)
		fd(j,0,61)
		if(f[i][j]) a[i][j]='/';
		c_out();
		fd(i,0,16)
		{
			cout<<a[i]<<endl;
		}
		fl=0;
	}
	return 0;
}
